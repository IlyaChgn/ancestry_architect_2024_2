# Инструкция по запуску приложения для построения генеалогического древа "Ancestry Architect"
Данный репозиторий содержит в себе серверную часть приложения для построения генеалогического древа "Ancestry Architect", а Readme-файл - инструкцию по запуску приложения.
Readme-файл будет обновляться по мере необходимости.

## Развертывание БД
1. Запустите контейнеры с СУБД PostgreSQL, Redis и средой pgAdmin, введя в терминал команду `docker compose up -d`.
2. Перейдите в браузер по адресу http://localhost:15432/. В появившемся окне регистрации введите имя пользователя и пароль, которые указаны в **.env** под переменными *PGADMIN_EMAIL* и *PGADMIN_PASSWORD* соответственно.
3. После успешной регистрации появится браузерный клиент pgAdmin. В нем необходимо зарегистрировать новый сервер. Для этого нажмите ПКМ по вкладке *Servers* в левой на боковой панели, далее Register -> Server.
4. Появится окно с настройками сервера. Дайте ему любое имя, например, ancestry_architect_2024_2. 
![image](https://github.com/user-attachments/assets/31fe8845-eb3f-4293-a3de-f0f510e1b150)

4. На вкладке *Connection* укажите параметры, представленные на скриншоте. В качестве имени  пользователя (Username) и пароля (Password) укажите данные из **.env**, переменные *POSTGRES_USERNAME* и *POSTGRES_PASSWORD*.
![image](https://github.com/user-attachments/assets/e41f3d38-c5ec-40ea-864a-b11621045a52)

5. После успешного создания подключения кликните правой кнопкой мыши по созданному соединению и нажмите Create -> Database. В появившемся окне введите имя базы данных - ancestry_architect.
![image](https://github.com/user-attachments/assets/0ea20724-4165-4796-85a0-d770ed3a5976)
6. Работа по настройке БД окончена.

## Применение миграций
Для применения миграций необходимо запустить приложение командой `go run cmd/app/main.go -migrate <Номер версии>`. В качестве значения флага *migrate* укажите номер той версии миграции, которую нужно применить. Если выполнить команду с указанием версии 0 или без указания флага, миграции не будут применены.
Пример:
``` bash 
go run cmd/app/main.go -migrate 1
Migration of version 1 has been applied
